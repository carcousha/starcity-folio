# 🧪 دليل اختبار وحدة الإرسال الجماعي

## 📋 نظرة عامة

هذا الدليل يوضح كيفية اختبار وحدة الإرسال الجماعي الجديدة في تطبيق StarCity Folio.

## 🚀 خطوات الاختبار

### 1. اختبار التطبيق الرئيسي

**الملف:** `test_bulk_messages.html`

**الخطوات:**
1. افتح `test_bulk_messages.html` في المتصفح
2. اضغط على "اختبار التطبيق الرئيسي"
3. تأكد من أن التطبيق يعمل على `http://localhost:5173`

**النتيجة المتوقعة:**
- ✅ التطبيق الرئيسي يعمل بشكل صحيح
- Status: 200

### 2. اختبار قاعدة البيانات

**الخطوات:**
1. اضغط على "اختبار قاعدة البيانات"
2. اضغط على "تطبيق جداول الإرسال الجماعي"

**النتيجة المتوقعة:**
- ✅ الاتصال بقاعدة البيانات ناجح
- ✅ تم تطبيق جداول الإرسال الجماعي بنجاح

### 3. اختبار API الواتساب

**الخطوات:**
1. اضغط على "اختبار API الواتساب"

**النتيجة المتوقعة:**
- ✅ API الواتساب يعمل بشكل صحيح
- Status: 200

### 4. اختبار الوظائف الأساسية

**الخطوات:**
1. اضغط على "اختبار الوظائف الأساسية"

**النتيجة المتوقعة:**
- ✅ جميع الوظائف متاحة

## 🔧 اختبار الوظائف التفصيلية

### اختبار إنشاء رسالة جماعية

1. **افتح التطبيق:** `http://localhost:5173`
2. **اذهب إلى:** وحدة الواتساب → الإرسال الجماعي
3. **أنشئ رسالة جديدة:**
   - اسم الرسالة: "رسالة اختبار"
   - المحتوى: "هذه رسالة اختبار من وحدة الإرسال الجماعي"
   - نوع الرسالة: نص
   - نوع المستلمين: جميع جهات الاتصال
   - نوع الإرسال: فوري

### اختبار إعدادات المستلمين

1. **اختبار الفلترة حسب النوع:**
   - اختر "حسب النوع"
   - حدد "عملاء"
   - تأكد من ظهور العدد الصحيح للمستلمين

2. **اختبار الفلترة حسب الشركة:**
   - اختر "حسب الشركة"
   - حدد شركة معينة
   - تأكد من فلترة المستلمين

3. **اختبار الأرقام المخصصة:**
   - اختر "أرقام مخصصة"
   - أضف أرقام هاتف
   - تأكد من حفظ الأرقام

### اختبار أنواع الإرسال

1. **الإرسال الفوري:**
   - أنشئ رسالة مع "إرسال فوري"
   - تأكد من بدء الإرسال مباشرة

2. **الإرسال المجدول:**
   - أنشئ رسالة مع "إرسال مجدول"
   - حدد وقت في المستقبل
   - تأكد من حفظ الجدولة

3. **الإرسال التدريجي:**
   - أنشئ رسالة مع "إرسال تدريجي"
   - حدد حجم الدفعة والوقت بين الدفعات
   - تأكد من بدء الإرسال التدريجي

## 📊 اختبار الإحصائيات والتقارير

### اختبار شريط التقدم

1. **أطلق رسالة جماعية**
2. **راقب شريط التقدم:**
   - تأكد من تحديث النسبة المئوية
   - تأكد من عرض عدد الرسائل المرسلة
   - تأكد من عرض معدل النجاح

### اختبار الإحصائيات العامة

1. **تحقق من الإحصائيات:**
   - إجمالي الرسائل الجماعية
   - الرسائل النشطة
   - معدل النجاح العام

## 🐛 اختبار معالجة الأخطاء

### اختبار الأخطاء الشائعة

1. **رسالة فارغة:**
   - حاول إنشاء رسالة بدون محتوى
   - تأكد من ظهور رسالة خطأ

2. **لا توجد جهات اتصال:**
   - حاول إرسال رسالة بدون مستلمين
   - تأكد من ظهور تحذير

3. **خطأ في API:**
   - حاول إرسال رسالة مع إعدادات خاطئة
   - تأكد من معالجة الخطأ بشكل صحيح

## 🔒 اختبار الأمان

### اختبار صلاحيات الوصول

1. **تأكد من أن الوحدة متاحة للإدارة فقط**
2. **اختبر RLS policies في قاعدة البيانات**
3. **تأكد من تشفير البيانات الحساسة**

## 📱 اختبار واجهة المستخدم

### اختبار التجاوب

1. **اختبر على أحجام شاشات مختلفة:**
   - سطح المكتب (1920x1080)
   - اللوحي (768x1024)
   - الهاتف (375x667)

2. **اختبر التصفح:**
   - تأكد من عمل جميع الأزرار
   - تأكد من عمل النماذج
   - تأكد من عمل التنقل

### اختبار اللغة

1. **تأكد من دعم العربية:**
   - النصوص
   - الأرقام
   - التواريخ

2. **تأكد من الاتجاه RTL:**
   - محاذاة النصوص
   - ترتيب العناصر

## 🎯 معايير النجاح

### معايير أساسية

- [ ] التطبيق يعمل بدون أخطاء
- [ ] قاعدة البيانات متصلة وتعمل
- [ ] API الواتساب يعمل
- [ ] جميع الوظائف الأساسية متاحة

### معايير متقدمة

- [ ] واجهة المستخدم سلسة وسهلة الاستخدام
- [ ] الأداء جيد (تحميل سريع)
- [ ] معالجة الأخطاء شاملة
- [ ] الأمان محقق

## 📝 تقرير الاختبار

### نموذج التقرير

```markdown
# تقرير اختبار وحدة الإرسال الجماعي

**التاريخ:** [التاريخ]
**المختبر:** [الاسم]
**الإصدار:** [رقم الإصدار]

## النتائج

### ✅ الاختبارات الناجحة
- [قائمة الاختبارات الناجحة]

### ❌ الاختبارات الفاشلة
- [قائمة الاختبارات الفاشلة مع التفاصيل]

### ⚠️ المشاكل المكتشفة
- [قائمة المشاكل والتوصيات]

## التوصيات

[التوصيات للتحسين]

## الخلاصة

[ملخص عام للاختبار]
```

## 🚨 استكشاف الأخطاء

### مشاكل شائعة وحلولها

1. **التطبيق لا يعمل:**
   - تأكد من تشغيل `npm run dev`
   - تحقق من المنفذ 5173

2. **خطأ في قاعدة البيانات:**
   - تأكد من تطبيق الجداول
   - تحقق من إعدادات Supabase

3. **خطأ في API:**
   - تحقق من إعدادات API key
   - تأكد من عمل Edge Function

## 📞 الدعم

إذا واجهت أي مشاكل، راجع:
1. ملفات السجل في المتصفح (F12)
2. سجلات Supabase
3. وثائق API الواتساب
