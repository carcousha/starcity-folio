# ๐ ุฏููู ุงุณุชุฎุฏุงู iframe ูู WhatsApp API

## ๐ **ูุธุฑุฉ ุนุงูุฉ**
ุชู ุฅูุดุงุก ููุชุจุฉ `WhatsAppSender` ุงูุชู ุชุณุชุฎุฏู ุชูููุฉ **iframe** ูุชุฌูุจ ูุดุงูู CORS ูุฅุฑุณุงู ุฑุณุงุฆู WhatsApp ุจูุฌุงุญ.

## ๐ง **ููููุฉ ุงูุนูู**

### **1. ุชูููุฉ iframe**
- โ **ุจุฏูู CORS proxies** - ุญู ูุธูู ูุขูู
- โ **ุฅุฑุณุงู ูุจุงุดุฑ** ุฅูู `https://app.x-growth.tech`
- โ **ุฏุนู ุฌููุน ุฃููุงุน ุงูุฑุณุงุฆู** (ูุตุ ูุณุงุฆุทุ ุฃุฒุฑุงุฑุ ููุงุฆู)

### **2. ุขููุฉ ุงูุฅุฑุณุงู**
```typescript
// 1. ูุญุงููุฉ fetch ูุจุงุดุฑ (no-cors)
const response = await fetch(url, { mode: 'no-cors' });

// 2. ุฅุฐุง ูุดู fetchุ ุงุณุชุฎุฏุงู iframe
if (!success) {
  success = await this.sendViaIframe(url);
}
```

## ๐ฑ **ุฃููุงุน ุงูุฑุณุงุฆู ุงููุฏุนููุฉ**

### **ุฑุณุงูุฉ ูุตูุฉ**
```typescript
await whatsappSender.sendTextMessage({
  api_key: "your_api_key",
  sender: "StarCity Folio",
  number: "+971501234567",
  message: "ูุฑุญุจุงู!",
  footer: "ูุฑุณู ุนุจุฑ Starcity Folio"
});
```

### **ุฑุณุงูุฉ ูุณุงุฆุท**
```typescript
await whatsappSender.sendMediaMessage({
  api_key: "your_api_key",
  sender: "StarCity Folio",
  number: "+971501234567",
  media_type: "image",
  url: "https://example.com/image.jpg",
  caption: "ุตูุฑุฉ ุฌูููุฉ",
  footer: "ูุฑุณู ุนุจุฑ Starcity Folio"
});
```

### **ุฑุณุงูุฉ ุฃุฒุฑุงุฑ**
```typescript
await whatsappSender.sendButtonMessage({
  api_key: "your_api_key",
  sender: "StarCity Folio",
  number: "+971501234567",
  message: "ุงุฎุชุฑ ุฎูุงุฑุงู:",
  buttons: ["ุฎูุงุฑ 1", "ุฎูุงุฑ 2", "ุฎูุงุฑ 3"],
  footer: "ูุฑุณู ุนุจุฑ Starcity Folio"
});
```

## ๐งช **ุงุฎุชุจุงุฑ ุงูููุชุจุฉ**

### **1. ุงุฎุชุจุงุฑ ุณุฑูุน ูู Console**
```javascript
// ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
const result = await whatsappSender.testConnection({
  api_key: "yQ9Ijpt3Zgd3dI5aVAGw12Y5z3fMFG",
  sender: "StarCity Folio"
});
console.log('ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ:', result);
```

### **2. ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงูุฉ**
```javascript
// ุฅุฑุณุงู ุฑุณุงูุฉ ูุตูุฉ
const result = await whatsappSender.sendTextMessage({
  api_key: "yQ9Ijpt3Zgd3dI5aVAGw12Y5z3fMFG",
  sender: "StarCity Folio",
  number: "+971501234567",
  message: "ุฑุณุงูุฉ ุงุฎุชุจุงุฑ",
  footer: "ูุฑุณู ุนุจุฑ Starcity Folio"
});
console.log('ูุชูุฌุฉ ุงูุฅุฑุณุงู:', result);
```

### **3. ููู ุงูุงุฎุชุจุงุฑ**
ุงูุชุญ `test-whatsapp.html` ูู ุงููุชุตูุญ ูุงุฎุชุจุงุฑ ุดุงูู.

## ๐ **ูุดุงูู ูุญููู**

### **ุงููุดููุฉ: "ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ" ููู ุงูุฑุณุงูุฉ ูุง ุชุตู**
**ุงูุญู:**
1. ุชุญูู ูู Console ูุฑุคูุฉ ุงูุฑุณุงุฆู ุงูุชูุตูููุฉ
2. ุชุฃูุฏ ูู ุตุญุฉ API Key
3. ุชุฃูุฏ ูู ุตุญุฉ ุฑูู ุงููุงุชู (ุงูุตูุบุฉ ุงูุฏูููุฉ)
4. ุชุญูู ูู ุฃู iframe ูุนูู ุจุดูู ุตุญูุญ

### **ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู**
**ุงูุญู:**
1. ุชุญูู ูู `.env.local` ูุญุชูู ุนูู ุงููุชุบูุฑุงุช ุงูุตุญูุญุฉ
2. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
3. ุชุญูู ูู Console ููุฃุฎุทุงุก

### **ุงููุดููุฉ: iframe ูุง ูุนูู**
**ุงูุญู:**
1. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ
2. ุชุฃูุฏ ูู ุฃู JavaScript ููุนู
3. ุชุญูู ูู Console ููุฃุฎุทุงุก

## ๐ **ุงููููุงุช ุงููุญุฏุซุฉ**

### **1. ุงูููุชุจุฉ ุงูุฑุฆูุณูุฉ**
- `src/lib/whatsapp-sender.ts` - ุงูููุชุจุฉ ุงููุญุฏุซุฉ

### **2. ุงูุตูุญุงุช ุงููุญุฏุซุฉ**
- `src/pages/whatsapp/Settings.tsx` - ุฅุนุฏุงุฏุงุช API
- `src/pages/whatsapp/QuickSend.tsx` - ุงูุฅุฑุณุงู ุงูุณุฑูุน
- `src/pages/whatsapp/Campaigns.tsx` - ุงูุญููุงุช
- `src/pages/whatsapp/WhatsAppAPI.tsx` - ุงุฎุชุจุงุฑ API

### **3. ูููุงุช ุงูุงุฎุชุจุงุฑ**
- `test-whatsapp.html` - ุงุฎุชุจุงุฑ ุดุงูู
- `WHATSAPP_IFRAME_GUIDE.md` - ูุฐุง ุงูุฏููู

## ๐ **ุจุฏุก ุงูุงุณุชุฎุฏุงู**

### **1. ุชุฃูุฏ ูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ**
```bash
# .env.local
VITE_WHATSAPP_API_KEY=yQ9Ijpt3Zgd3dI5aVAGw12Y5z3fMFG
VITE_WHATSAPP_SENDER=StarCity Folio
```

### **2. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู**
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
2. ุงุถุบุท "ุงุฎุชุจุงุฑ ุงูุงุชุตุงู"
3. ุชุญูู ูู ุงููุชูุฌุฉ

### **3. ุฅุฑุณุงู ุฑุณุงูุฉ**
1. ุงุฐูุจ ุฅูู ุตูุญุฉ "ุงูุฅุฑุณุงู ุงูุณุฑูุน"
2. ุฃุฏุฎู ุงูุจูุงูุงุช ุงููุทููุจุฉ
3. ุงุถุบุท "ุฅุฑุณุงู ุงูุฑุณุงูุฉ"

## ๐ **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**

### **Console Logs**
```typescript
๐ค ุฅุฑุณุงู ุฑุณุงูุฉ ูุตูุฉ: { api_key: "yQ9Ijpt3Zgd3dI5aVAGw12Y5z3fMFG...", ... }
๐ URL ุงูุฅุฑุณุงู: https://app.x-growth.tech/send-message?...
๐ ูุญุงููุฉ ุงูุฅุฑุณุงู ุงููุจุงุดุฑ ุนุจุฑ fetch...
โ ุงูุฅุฑุณุงู ุงููุจุงุดุฑ ูุฌุญ (opaque response)
โ ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ
```

### **ุญุงูุงุช ุงูุฅุฑุณุงู**
- โ **ูุฌุญ** - ุงูุฑุณุงูุฉ ุฃูุฑุณูุช ุจูุฌุงุญ
- โ **ูุดู** - ูุดู ูู ุงูุฅุฑุณุงู
- โณ **ุฌุงุฑู** - ูู ุญุงูุฉ ุงูุฅุฑุณุงู

## ๐ฏ **ุงููููุฒุงุช**

- ๐ซ **ุจุฏูู CORS proxies** - ุญู ูุธูู ูุขูู
- ๐ **ุฎุตูุตูุฉ ูุงููุฉ** - ูุง ุชุดุงุฑู ุงูุจูุงูุงุช ูุน ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- โก **ุณุฑุนุฉ ุนุงููุฉ** - ุฅุฑุณุงู ูุจุงุดุฑ ุนุจุฑ iframe
- ๐ก๏ธ **ููุซูููุฉ** - fallback ุชููุงุฆู ูู fetch ุฅูู iframe
- ๐ฑ **ุฏุนู ูุงูู** - ุฌููุน ุฃููุงุน ุฑุณุงุฆู WhatsApp

## ๐ **ุงูุฏุนู**

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู Console ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุตุญุฉ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
3. ุงุฎุชุจุฑ API ูุจุงุดุฑุฉ ุนุจุฑ `test-whatsapp.html`
4. ุชุญูู ูู ุตุญุฉ API Key ูุฑูู ุงููุฑุณู

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ุจูุงุณุทุฉ Starcity Folio Team** ๐
