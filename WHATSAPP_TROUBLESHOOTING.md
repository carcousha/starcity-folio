# 🔧 دليل حل مشاكل WhatsApp API

## 🚨 المشاكل الشائعة والحلول

### 1. مشكلة "Invalid api_key or sender"

**السبب:** 
- API Key فارغ أو غير صحيح
- رقم المرسل (Sender) فارغ أو غير صحيح
- Base URL غير صحيح

**الحل:**
1. تأكد من إدخال API Key صحيح من خدمة WhatsApp API
2. تأكد من إدخال رقم المرسل الصحيح
3. تأكد من صحة Base URL (مثال: `https://app.x-growth.tech`)

**كيفية التكوين:**
1. اضغط على زر "⚙️ الإعدادات"
2. أدخل API Key الصحيح
3. أدخل رقم المرسل
4. اضغط "حفظ التكوين"

### 2. مشكلة CORS (Cross-Origin Resource Sharing)

**السبب:**
- المتصفح يمنع الطلبات من domain مختلف
- Headers غير صحيحة

**الحل:**
1. **تفعيل CORS Proxy:**
   - اذهب إلى: https://cors-anywhere.herokuapp.com/corsdemo
   - اضغط: "Request temporary access to the demo server"
   - عد للصفحة وجرب الإرسال مرة أخرى

2. **استخدام CORS Proxy بديل:**
   - الكود يستخدم تلقائياً عدة CORS Proxies
   - إذا فشل واحد، سيجرب الآخر تلقائياً

### 3. مشكلة "خطأ في معالجة الاستجابة"

**السبب:**
- استجابة API غير صحيحة
- CORS Proxy يعيد HTML بدلاً من JSON

**الحل:**
1. تأكد من صحة API Key و Sender
2. تفعيل CORS Proxy كما هو موضح أعلاه
3. تحقق من صحة Base URL

## 🛠️ خطوات التشخيص

### 1. اختبار الاتصال
- اضغط على زر "🔗 اختبار الاتصال"
- تحقق من رسائل Console في Developer Tools

### 2. فحص التكوين
- تأكد من حفظ التكوين
- تحقق من أن جميع الحقول مملوءة

### 3. مراقبة الشبكة
- افتح Developer Tools > Network
- حاول إرسال رسالة
- تحقق من الطلبات والاستجابات

## 📱 أنواع الرسائل المدعومة

1. **رسالة نصية** - نص عادي مع footer اختياري
2. **رسالة وسائط** - صورة، فيديو، صوت، مستند
3. **رسالة موقع** - إحداثيات GPS
4. **VCard** - معلومات جهة اتصال
5. **أزرار تفاعلية** - أزرار للرد أو الاتصال
6. **قوائم** - قوائم تفاعلية

## 🔑 متطلبات API

- **API Key:** مفتاح مصادقة من مزود الخدمة
- **Sender:** رقم الهاتف المرسل (بصيغة دولية)
- **Base URL:** عنوان API الأساسي
- **رقم المستلم:** رقم الهاتف المستلم (بصيغة دولية)

## 📞 دعم فني

إذا استمرت المشكلة:
1. تحقق من رسائل Console
2. تأكد من صحة بيانات API
3. جرب تفعيل CORS Proxy
4. تحقق من حالة خدمة API

## 🎯 نصائح للحصول على أفضل أداء

1. **استخدم أرقام هواتف بصيغة دولية** (مثال: +971501234567)
2. **تأكد من صحة API Key** قبل كل استخدام
3. **استخدم CORS Proxy** إذا واجهت مشاكل CORS
4. **راقب رسائل Console** للتشخيص
5. **اختبر الاتصال** قبل إرسال الرسائل الفعلية
