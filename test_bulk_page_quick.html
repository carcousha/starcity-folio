<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุณุฑูุน - ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background-color: #f9fafb;
        }
        .test-section h3 {
            color: #374151;
            margin-bottom: 15px;
        }
        .button {
            background-color: #2563eb;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #1d4ed8;
        }
        .button.success {
            background-color: #10b981;
        }
        .button.error {
            background-color: #ef4444;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 14px;
        }
        .result.success {
            background-color: #d1fae5;
            border: 1px solid #10b981;
            color: #065f46;
        }
        .result.error {
            background-color: #fee2e2;
            border: 1px solid #ef4444;
            color: #991b1b;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background-color: #f3f4f6;
            border-radius: 6px;
            border-left: 4px solid #2563eb;
        }
        .step h4 {
            margin: 0 0 5px 0;
            color: #374151;
        }
        .step p {
            margin: 0;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>๐งช ุงุฎุชุจุงุฑ ุณุฑูุน - ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู</h1>
        
        <div class="test-section">
            <h3>1. ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช</h3>
            <button class="button" onclick="testDatabase()">ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช</button>
            <div id="databaseResult"></div>
        </div>

        <div class="test-section">
            <h3>2. ุงุฎุชุจุงุฑ ุงูุชุทุจูู ุงูุฑุฆูุณู</h3>
            <button class="button" onclick="testMainApp()">ุงุฎุชุจุงุฑ ุงูุชุทุจูู</button>
            <div id="appResult"></div>
        </div>

        <div class="test-section">
            <h3>3. ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู</h3>
            <button class="button" onclick="testBulkPage()">ุงุฎุชุจุงุฑ ุงูุตูุญุฉ</button>
            <div id="bulkPageResult"></div>
        </div>

        <div class="test-section">
            <h3>4. ุฎุทูุงุช ุงูุชุฌุฑุจุฉ</h3>
            
            <div class="step">
                <h4>ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุฌุฏุงูู</h4>
                <p>ุฅุฐุง ูุดู ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงุชุจุน ุงูุฎุทูุงุช ูู `create_bulk_tables_manual.html`</p>
            </div>

            <div class="step">
                <h4>ุงูุฎุทูุฉ 2: ูุชุญ ุงูุชุทุจูู</h4>
                <p>ุงูุชุญ <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></p>
            </div>

            <div class="step">
                <h4>ุงูุฎุทูุฉ 3: ุงููุตูู ููุตูุญุฉ</h4>
                <p>ุงุฐูุจ ุฅูู: ูุญุฏุฉ ุงููุงุชุณุงุจ โ ุงูุฅุฑุณุงู ุงูุฌูุงุนู</p>
            </div>

            <div class="step">
                <h4>ุงูุฎุทูุฉ 4: ุฅูุดุงุก ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ</h4>
                <p>ุงุถุบุท "ุฅูุดุงุก ุฑุณุงูุฉ ุฌุฏูุฏุฉ" ูุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ:</p>
                <ul>
                    <li>ุงุณู ุงูุฑุณุงูุฉ: "ุฑุณุงูุฉ ุงุฎุชุจุงุฑ"</li>
                    <li>ุงููุญุชูู: "ูุฐู ุฑุณุงูุฉ ุงุฎุชุจุงุฑ ูู ูุญุฏุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู"</li>
                    <li>ููุน ุงูุฑุณุงูุฉ: ูุต</li>
                    <li>ููุน ุงููุณุชูููู: ุฌููุน ุฌูุงุช ุงูุงุชุตุงู</li>
                    <li>ููุน ุงูุฅุฑุณุงู: ููุฑู</li>
                </ul>
            </div>

            <div class="step">
                <h4>ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงููุธุงุฆู</h4>
                <p>ุฌุฑุจ ุงููุธุงุฆู ุงูุชุงููุฉ:</p>
                <ul>
                    <li>ุฅูุดุงุก ุฑุณุงูุฉ ุฌุฏูุฏุฉ</li>
                    <li>ุชุบููุฑ ููุน ุงููุณุชูููู</li>
                    <li>ุชุบููุฑ ููุน ุงูุฅุฑุณุงู</li>
                    <li>ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>5. ุฑูุงุจุท ูููุฏุฉ</h3>
            <button class="button" onclick="openApp()">ูุชุญ ุงูุชุทุจูู</button>
            <button class="button" onclick="openCreateTables()">ุฅูุดุงุก ุงูุฌุฏุงูู</button>
            <button class="button" onclick="openTestGuide()">ุฏููู ุงูุงุฎุชุจุงุฑ</button>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://hrjyjemacsjoouobcgri.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyanlqZW1hY3Nqb291b2JjZ3JpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NjgxOTIsImV4cCI6MjA2OTQ0NDE5Mn0.MVVJNBVlK-meXguUyO76HqjawbPgAAzhIvKG9oWKBlk';

        function showResult(elementId, message, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="result ${isSuccess ? 'success' : 'error'}">${message}</div>`;
        }

        async function testDatabase() {
            showResult('databaseResult', 'ุฌุงุฑู ุงูุงุฎุชุจุงุฑ...', true);
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/whatsapp_bulk_messages?select=count`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                        'apikey': SUPABASE_ANON_KEY
                    }
                });

                if (response.ok) {
                    showResult('databaseResult', 'โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุนูู ุจุดูู ุตุญูุญ!\n\nุงูุฌุฏุงูู ููุฌูุฏุฉ ููููู ุงุณุชุฎุฏุงู ูุญุฏุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู.', true);
                } else {
                    showResult('databaseResult', `โ ูุดู ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช\n\nStatus: ${response.status}\n\nูุฌุจ ุฅูุดุงุก ุงูุฌุฏุงูู ุฃููุงู.`, false);
                }
            } catch (error) {
                showResult('databaseResult', `โ ุฎุทุฃ ูู ุงูุงุชุตุงู:\n\n${error.message}\n\nุชุฃูุฏ ูู ุฅูุดุงุก ุงูุฌุฏุงูู.`, false);
            }
        }

        async function testMainApp() {
            showResult('appResult', 'ุฌุงุฑู ุงูุงุฎุชุจุงุฑ...', true);
            
            try {
                const response = await fetch('http://localhost:5173', {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    showResult('appResult', 'โ ุงูุชุทุจูู ุงูุฑุฆูุณู ูุนูู ุจุดูู ุตุญูุญ!\n\nููููู ุงูุขู ูุชุญ ุงูุชุทุจูู ูุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู.', true);
                } else {
                    showResult('appResult', `โ ุงูุชุทุจูู ุงูุฑุฆูุณู ูุง ูุนูู\n\nStatus: ${response.status}\n\nุชุฃูุฏ ูู ุชุดุบูู npm run dev`, false);
                }
            } catch (error) {
                showResult('appResult', `โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุชุทุจูู:\n\n${error.message}\n\nุชุฃูุฏ ูู ุชุดุบูู ุงูุชุทุจูู ุนูู ุงููููุฐ 5173`, false);
            }
        }

        async function testBulkPage() {
            showResult('bulkPageResult', 'ุฌุงุฑู ุงูุงุฎุชุจุงุฑ...', true);
            
            try {
                const response = await fetch('http://localhost:5173/whatsapp/bulk-send', {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    showResult('bulkPageResult', 'โ ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู ุชุนูู ุจุดูู ุตุญูุญ!\n\nููููู ุงูุขู ุงุณุชุฎุฏุงู ุฌููุน ุงููุธุงุฆู.', true);
                } else {
                    showResult('bulkPageResult', `โ ุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู ูุง ุชุนูู\n\nStatus: ${response.status}\n\nุชุฃูุฏ ูู ุฅูุดุงุก ุงูุฌุฏุงูู ุฃููุงู.`, false);
                }
            } catch (error) {
                showResult('bulkPageResult', `โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุตูุญุฉ ุงูุฅุฑุณุงู ุงูุฌูุงุนู:\n\n${error.message}\n\nุชุฃูุฏ ูู ุฅูุดุงุก ุงูุฌุฏุงูู ูุชุดุบูู ุงูุชุทุจูู.`, false);
            }
        }

        function openApp() {
            window.open('http://localhost:5173', '_blank');
        }

        function openCreateTables() {
            window.open('create_bulk_tables_manual.html', '_blank');
        }

        function openTestGuide() {
            window.open('TESTING_GUIDE.md', '_blank');
        }

        // ุงุฎุชุจุงุฑ ุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.onload = function() {
            setTimeout(() => {
                testDatabase();
            }, 1000);
        };
    </script>
</body>
</html>
