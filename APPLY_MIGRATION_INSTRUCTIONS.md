# تعليمات تطبيق Migration حقل اللغة

## المشكلة
الوسطاء يظهرون كلهم باللغة الإنجليزية مع أنهم عرب، وذلك لأن حقل `language` لم يتم إضافته بعد لقاعدة البيانات.

## الحل

### الطريقة الأولى: عبر Supabase Dashboard
1. اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard)
2. اختر مشروعك
3. اذهب إلى **SQL Editor**
4. انسخ والصق محتوى ملف `apply_language_migration.sql`
5. اضغط **Run** لتطبيق الـ migration

### الطريقة الثانية: عبر Supabase CLI
```bash
# إذا كان لديك Supabase CLI مثبت
supabase db push

# أو
npx supabase db push
```

### الطريقة الثالثة: تطبيق SQL مباشرة
انسخ محتوى ملف `apply_language_migration.sql` وطبقه في SQL Editor.

## ما يفعله الـ Migration
1. يضيف حقل `language` لجدول `land_brokers`
2. يضع القيمة الافتراضية `'arabic'` للوسطاء الموجودين
3. ينشئ فهرس لتحسين الأداء
4. يضيف سياسات RLS المناسبة

## بعد التطبيق
1. أعد تحميل صفحة الوسطاء
2. ستجد أن جميع الوسطاء أصبحوا باللغة العربية
3. يمكنك الآن تعديل اللغة لكل وسيط
4. يمكنك فلترة الوسطاء باللغة

## ملاحظات
- إذا واجهت مشاكل في الحذف/التعديل، طبق ملف `fix_rls_policies.sql` أولاً
- تأكد من أن لديك صلاحيات كافية في قاعدة البيانات
